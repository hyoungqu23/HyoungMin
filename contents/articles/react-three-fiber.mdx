---
title: React Three Fiber
description: React Three Fiber ê³µì‹ ë¬¸ì„œë¥¼ ì½ì–´ë³´ì
createdAt: 2024-02-06
category: React
tags:
  - React
  - TypeScript
  - React-Three-Fiber
  - R3F
  - Three.js
---

# Introduction

R3FëŠ” `Three.js`ë¥¼ ìœ„í•œ React ë Œë”ëŸ¬ì…ë‹ˆë‹¤.

ìƒíƒœì— ë°˜ì‘í•˜ê³  ì‰½ê²Œ ìƒí˜¸ì‘ìš©í•˜ë©° React ìƒíƒœê³„ì— ì°¸ì—¬í•  ìˆ˜ ìˆëŠ” ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë…ë¦½í˜• ì»´í¬ë„ŒíŠ¸ë¥¼ í™œìš©í•´ ì„ ì–¸ì ìœ¼ë¡œ ì¥ë©´ì„ ìƒì„±í•´ë³´ì„¸ìš”.

```bash
pnpm add three @types/three @react-three/fiber
```

## ì œí•œì´ ìˆë‚˜ìš”?

ì—†ì–´ìš”. `Three.js`ì—ì„œ ë™ì‘í•˜ëŠ” ëª¨ë“  ê²ƒì´ ì˜ˆì™¸ì—†ì´ R3Fì—ì„œ ë™ì‘í•´ìš”.

## ìˆœìˆ˜í•œ `Three.js`ë³´ë‹¤ ëŠë¦°ê°€ìš”?

ì•„ë‹ˆìš”. ì˜¤ë²„í—¤ë“œê°€ ì—†ì–´ìš”. ì»´í¬ë„ŒíŠ¸ëŠ” React ì™¸ë¶€ì—ì„œ ë Œë”ë§ë¼ìš”. React ìŠ¤ì¼€ì¤„ë§ ê¸°ëŠ¥ìœ¼ë¡œ ì¸í•´ ê·œëª¨ ë©´ì—ì„œ `Three.js`ë³´ë‹¤ ì„±ëŠ¥ì´ ë›°ì–´ë‚˜ìš”.

## `Three.js`ì˜ ë¹ˆë²ˆí•œ ê¸°ëŠ¥ ì—…ë°ì´íŠ¸ë¥¼ ë”°ë¼ê°ˆ ìˆ˜ ìˆë‚˜ìš”?

ë„¤. R3FëŠ” ë‹¨ì§€ JSXë¡œ `Three.js`ë¥¼ í‘œí˜„í•  ë¿ì´ì—ìš”. `<mesh />`ëŠ” ë™ì ìœ¼ë¡œ ìƒˆë¡œìš´ `THREE.Mesh()`ë¡œ ë³€ê²½ë¼ìš”. ìƒˆë¡œìš´ `Three.js` ë²„ì „ì´ ê¸°ëŠ¥ì„ ì¶”ê°€, ì œê±°, ìˆ˜ì •í•˜ë©´, R3F ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì—…ë°ì´íŠ¸ì— ì˜ì¡´í•˜ì§€ ì•Šê³  ì¦‰ì‹œ í™œìš©í•  ìˆ˜ ìˆì–´ìš”.

## Live Example([Link](https://codesandbox.io/s/icy-tree-brnsm?file=/src/App.tsx))

```tsx
import * as THREE from 'three';
import { createRoot } from 'react-dom/client';
import React, { useRef, useState } from 'react';
import { Canvas, useFrame, ThreeElements } from '@react-three/fiber';

function Box(props: ThreeElements['mesh']) {
  const meshRef = useRef<THREE.Mesh>(null!);
  const [hovered, setHover] = useState(false);
  const [active, setActive] = useState(false);
  useFrame((state, delta) => (meshRef.current.rotation.x += delta));
  return (
    <mesh
      {...props}
      ref={meshRef}
      scale={active ? 1.5 : 1}
      onClick={event => setActive(!active)}
      onPointerOver={event => setHover(true)}
      onPointerOut={event => setHover(false)}
    >
      <boxGeometry args={[1, 1, 1]} />
      <meshStandardMaterial color={hovered ? 'hotpink' : 'orange'} />
    </mesh>
  );
}

createRoot(document.getElementById('root')).render(
  <Canvas>
    <ambientLight intensity={Math.PI / 2} />
    <spotLight
      position={[10, 10, 10]}
      angle={0.15}
      penumbra={1}
      decay={0}
      intensity={Math.PI}
    />
    <pointLight position={[-10, -10, -10]} decay={0} intensity={Math.PI} />
    <Box position={[-1.2, 0, 0]} />
    <Box position={[1.2, 0, 0]} />
  </Canvas>,
);
```

## First Step

R3Fì— ë›°ì–´ë“¤ê¸° ì „ì— Reactì™€ `Three.js`ì— ëŒ€í•´ ì˜ ì•Œê³  ìˆì–´ì•¼ í•´ìš”. Reactì— ëŒ€í•´ ì˜ ëª¨ë¥´ê² ë‹¤ë©´ ê³µì‹ React ë¬¸ì„œ, íŠ¹íˆ Hooksì— ê´€í•œ ì„¹ì…˜ì„ ì°¸ì¡°í•˜ì„¸ìš”. `Three.js`ì— ëŒ€í•´ì„œëŠ” ë‹¤ìŒ ë§í¬ë“¤ì„ í™•ì¸í•´ë³´ì„¸ìš”.

- `Three.js`ì— ëŒ€í•œ [ê¸°ë³¸ì ì¸ ì´í•´](https://threejs.org/docs/index.html#manual/en/introduction/Creating-a-scene)ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. `[Three.js` ê³µì‹ë¬¸ì„œ](https://threejs.org/docs/index.html#manual/en/introduction/Creating-a-scene)ë¥¼ ê³„ì† ì—´ì–´ ë‘ì„¸ìš”.
- `scene`, `camera`, `mesh`, `geometry`, `material`ì´ ë¬´ì—‡ì¸ì§€ ì•Œì•˜ë‹¤ë©´ [Live Example](https://codesandbox.io/s/icy-tree-brnsm?file=/src/App.tsx)ë¥¼ ê°€ì ¸ì˜¤ì„¸ìš”.
- Live Exampleì—ì„œ ë³´ì´ëŠ” JSX ìš”ì†Œ(`<mesh />`, `<ambientLight />` ë“±)ë¥¼ `[Three.js` ê³µì‹ë¬¸ì„œ](https://threejs.org/docs/index.html#manual/en/introduction/Creating-a-scene)ì—ì„œ ì°¾ì•„ë³´ì„¸ìš”. `Three.js`ì—ì„œ ë‚´ë³´ë‚¸ ëª¨ë“  ìš”ì†ŒëŠ” R3Fì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µë¼ìš”.
- ëª‡ ê°€ì§€ ê°’ì„ ë³€ê²½í•´ë³´ê³ , [R3F ê³µì‹ë¬¸ì„œ](https://docs.pmnd.rs/react-three-fiber/getting-started/introduction)ë¥¼ í™•ì¸í•˜ë©° ë‹¤ì–‘í•œ ì„¤ì •ê³¼ Hooksê°€ ì–´ë–¤ ê¸°ëŠ¥ì„ í•˜ëŠ”ì§€ ì‚´í´ë³´ì„¸ìš”.

ì¶”ê°€ì ìœ¼ë¡œ ìœ ìš©í•œ ìë£Œì˜ˆìš”.

- `[Three.js` ê³µì‹ ë¬¸ì„œ](https://threejs.org/docs/) ë° [ì˜ˆì œ](https://threejs.org/examples)
- [Discover `Three.js` ë¬¸ì„œ](https://discoverthreejs.com/), íŠ¹íˆ [Tips and Tricks ì±•í„°](https://discoverthreejs.com/tips-and-tricks/)ì—ì„œ ëª¨ë²” ì‚¬ë¡€ë¥¼ ì‚´í´ë³´ì„¸ìš”.
- ìµœê³ ì˜ í•™ìŠµ ìë£Œì¸ [Bruno Simons Threejs Jouney](https://threejs-journey.com/)ì— ì´ì œ ì „ì²´ [R3F ì±•í„°](https://threejs-journey.com/lessons/what-are-react-and-react-three-fiber)ê°€ í¬í•¨ë˜ì–´ ìˆì–´ìš”.

# **Installation**

```bash
npm install three @react-three/fiber
```

> R3FëŠ” React 18ë²„ì „ ì´ìƒê³¼ í˜¸í™˜ë˜ë©°, ReactDOMê³¼ React Nativeì—ì„œë„ ë™ì‘í•´ìš”.

## Next.js

R3FëŠ” Next.jsì—ì„œ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥í•˜ì§€ë§Œ, `Three.js` ìƒíƒœê³„ì—ì„œ íŠ¸ëœìŠ¤íŒŒì¼ë˜ì§€ ì•Šì€ ì• ë“œì˜¨ì— ì§ë©´í•˜ê²Œ ë  ê±°ì—ìš”.

```tsx
/** @type {import('next').NextConfig} */
const nextConfig = {
  transpilePackages: ['three'],
};

module.exports = nextConfig;
```

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” `next.config.js`ì˜ `transpilePackages`ì— `three`ë¥¼ ì¶”ê°€í•´ì•¼ í•´ìš”.

# Your First Scene

ì´ë²ˆ ê°€ì´ë“œëŠ” ì²« ë²ˆì§¸ R3F Sceneì„ ì„¤ì •í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ê³ , R3Fì˜ í•µì‹¬ ì»¨ì…‰ì„ ì†Œê°œí•  ê±°ì—ìš”.

## Setting up the Canvas

`<Canvas />` ì»´í¬ë„ŒíŠ¸ë¥¼ R3Fì—ì„œ ë¶ˆëŸ¬ì™€ React ë Œë” íŠ¸ë¦¬ì— ì¶”ê°€í•œë‹¤.

```tsx
import { createRoot } from 'react-dom/client';
import { Canvas } from '@react-three/fiber';

function App() {
  return (
    <div id='canvas-container'>
      <Canvas />
    </div>
  );
}

createRoot(document.getElementById('root')).render(<App />);
```

`<Canvas />` ì»´í¬ë„ŒíŠ¸ëŠ” Scene ë’¤ì—ì„œ ëª‡ ê°€ì§€ ì¤‘ìš”í•œ ì„¤ì • ì‘ì—…ì„ ìˆ˜í–‰í•´ìš”.

- ë Œë”ë§ì— í•„ìš”í•œ ê¸°ë³¸ êµ¬ì„± ìš”ì†Œì¸ Sceneê³¼ Cameraë¥¼ ì„¤ì •í•´ìš”.
- ë§¤ í”„ë ˆì„ë§ˆë‹¤ Sceneì„ ë Œë”ë§í•˜ë¯€ë¡œ ê¸°ì¡´ì˜ ë Œë” ë£¨í”„ê°€ í•„ìš”í•˜ì§€ ì•Šì•„ìš”.

<aside>
ğŸ’¡ CanvasëŠ” ë¶€ëª¨ Nodeì— ë§ê²Œ ë°˜ì‘í•˜ë¯€ë¡œ, ë¶€ëª¨ì˜ ë„ˆë¹„ì™€ ë†’ì´ë¥¼ ë³€ê²½í•˜ì—¬ Canvasì˜ í¬ê¸°ë¥¼ ì œì–´í•  ìˆ˜ ìˆì–´ìš”.

</aside>

## Adding a Mesh Component

Sceneì—ì„œ ì‹¤ì œë¡œ ë¬´ì–¸ê°€ë¥¼ ë³´ê¸° ìœ„í•´ì„œëŠ” `new THREE.Mesh()`ì™€ ë™ì¼í•œ `<mesh />` ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤.

```tsx
<Canvas>
  <mesh />
</Canvas>
```

MeshëŠ” `Three.js`ì—ì„œ ê¸°ë³¸ Scene ê°œì²´ë¡œ, 3D ê³µê°„ì—ì„œ ëª¨ì–‘ì„ í‘œí˜„í•˜ëŠ” ë° í•„ìš”í•œ Geometry, Materialì„ ë³´ê´€í•˜ëŠ” ë° ì‚¬ìš©í•´ìš”. `BoxGeometry`ì™€ `MeshStandardMaterial`ì„ í™œìš©í•´ì„œ ë¶€ëª¨ Nodeì— ìë™ì ìœ¼ë¡œ ì²¨ë¶€ë˜ëŠ” ìƒˆë¡œìš´ Meshë¥¼ ìƒì„±í•  ìˆ˜ ìˆì–´ìš”.

```tsx
<Canvas>
  <mesh>
    <boxGeometry />
    <meshStandardMaterial />
  </mesh>
</Canvas>
```

ìœ„ R3F ì½”ë“œëŠ” ì•„ë˜ì˜ `Three.js` ì½”ë“œì™€ ë™ì¼í•´ìš”.

```tsx
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);

const renderer = new THREE.WebGLRenderer();
renderer.setSize(width, height);
document.querySelector('#canvas-container').appendChild(renderer.domElement);

const mesh = new THREE.Mesh();
mesh.geometry = new THREE.BoxGeometry();
mesh.material = new THREE.MeshStandardMaterial();

scene.add(mesh);

function animate() {
  requestAnimationFrame(animate);
  renderer.render(scene, camera);
}

animate();
```

## Adding Lights

ë‹¤ìŒìœ¼ë¡œ, Sceneì— ì•„ë˜ `<ambientLight />`, `<directionalLight />` ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ê°€í•˜ì—¬ ë¹›ì„ ì¶”ê°€í•  ìˆ˜ ìˆì–´ìš”.

```jsx
<Canvas>
  <ambientLight intensity={0.1} />
  <directionalLight color='red' position={[0, 0, 5]} />
</Canvas>
```
