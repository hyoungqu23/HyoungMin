---
title: Next.jsì—ì„œ Notion APIë¥¼ í™œìš©í•´ CMS ë§Œë“¤ê¸°
description: Next.jsì˜ Page Routerì—ì„œ Notionì„ ì—°ê²°í•˜ëŠ” ë°©ë²•
createdAt: 2022-11-04
category: Next.js
tags:
  - React
  - TypeScript
  - Next.js
  - Tailwind CSS
  - Notion
  - Notion API
  - CMS
  - Content Management System
  - Axios
  - API
  - getServerSideProps
  - SSG
  - Static Site Generation
  - ë¸”ë¡œê·¸
  - ê°œë°œ ë¸”ë¡œê·¸
---

## ì‹œì‘ - ì™œ CMSë¡œ ë³€ê²½í•˜ë ¤ê³  í•˜ëŠ”ê°€?

ê¸°ìˆ  ë¸”ë¡œê·¸ê°€ ì•„ë‹ˆë”ë¼ë„ í•™ìŠµê³¼ ê²½í—˜ì„ ìì‹ ì˜ ê²ƒìœ¼ë¡œ ì™„ë²½íˆ í¡ìˆ˜í•˜ê³ , ê¸°ì–µì´ ì•„ë‹ˆë¼ ê¸°ë¡ì— ì˜ì¡´í•˜ê¸° ìœ„í•´ì„œëŠ” ê¸€ì„ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  ìƒê°í•œë‹¤. ê·¸ëŸ°ë° ê¸€ì„ ì“°ëŠ” ë„êµ¬ê°€ ë¶ˆí¸í•˜ê±°ë‚˜ ë§Œì¡±ìŠ¤ëŸ½ì§€ ëª»í•˜ë‹¤ë©´, ë‹¹ì—°íˆ ê¸€ì„ ì“°ê¸°ë¥¼ ì£¼ì €í•˜ê±°ë‚˜ ë¯¸ë£¨ê²Œ ë  ê²ƒì´ë‹¤.

ê·¸ë ‡ë‹¤ê³  ì§ì ‘ ì…ë§›ì— ë§ëŠ” ì—ë””í„°ë‚˜ CMSë¥¼ ì œì‘í•˜ëŠ” ê²ƒì€ ë°°ë³´ë‹¤ ë°°ê¼½ì´ ë” í° ìƒí™©ì´ ë  ê²ƒ ê°™ì•˜ë‹¤. ì´ë¯¸ ì„¤ëª…í–ˆë“¯ ê¸°ì¡´ í”Œë«í¼ì„ í™œìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì€ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì„ í•˜ê¸° ìœ„í•´ì„œì´ì§€ë§Œ, ì£¼ê°ì´ ì „ë„ë˜ëŠ” ìƒí™©ì€ ì•„ë¬´ë˜ë„ ë‚©ë“í•˜ê¸° ì–´ë µê¸° ë•Œë¬¸ì— CMS, ì—ë””í„° ì§ì ‘ ì œì‘ì€ ë°”ë¡œ â€œì–¸ì  ê°€ í•  ì¼" ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€í•´ë’€ë‹¤.

ì•„ë¬´íŠ¼ ê¸€ì„ ìœ ë ¤í•˜ê²Œ ì“°ëŠ” ê²ƒë„ ì•„ë‹ˆë©´ì„œ ê·¸ëƒ¥ VS Codeì—ì„œ ë§ˆí¬ë‹¤ìš´ í¸ì§‘ê¸°ë¡œ ê¸€ì„ ì“°ë ¤ê³  í•˜ë©´ ìê¾¸ ì½”ë“œ ìƒê°ì´ ë‚˜ê³  ì§‘ì¤‘ë„ë„ ë–¨ì–´ì§€ë©°, ì´ë¯¸ì§€ë¥¼ ì¶”ê°€í•˜ê¸°ë„ ë¶ˆí¸í–ˆë‹¤. ê²°êµ­, ë§ˆí¬ë‹¤ìš´ì„ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì´ì „ë¶€í„° êµ‰ì¥íˆ ë§ì´ ì‚¬ìš©í•˜ê³  ìˆì—ˆë˜ Notionì„ í™œìš©í•´ ê¸€ì„ ì‘ì„±í•´ ì˜®ê¸°ê¸°ë§Œ í•˜ê²Œ ëë‹¤. ë¬¼ë¡  ê°œë°œìì—ê²Œ ë§ˆí¬ë‹¤ìš´ì´ë€ ë¹¼ë†“ì„ ìˆ˜ ì—†ê³ , ì‚¬ì‹¤ Notion ìì²´ë„ ë§ˆí¬ë‹¤ìš´ê³¼ ì‘ì„±ë²•ì´ ìœ ì‚¬í•˜ë¯€ë¡œ ë”±íˆ ë°”ê¿€ ì´ìœ ê°€ í¬ë¦¬í‹°ì»¬í•˜ì§€ëŠ” ì•Šë‹¤.

í•˜ì§€ë§Œ, ì§€ì†ì ìœ¼ë¡œ ê¸€ì„ ì‘ì„±í•  ì˜ˆì •ì´ê¸° ë•Œë¬¸ì— í•˜ë‚˜ ì‘ì„±í•˜ëŠ”ë° ë¶ˆí¸í•˜ê²Œ ì‘ì„±í•˜ê³  ì‹¶ì§€ ì•Šì•„ì„œ í¸í•˜ê²Œ Notionì— ì‘ì„±í•˜ê³ , CMSì— ì—…ë¡œë“œí•˜ì—¬ ë¸”ë¡œê·¸ë¥¼ ìš´ì˜í•˜ê³ ì í–ˆë‹¤.

ë‹¤ë§Œ, ì˜ ìƒê°í•´ë³´ë©´ ìµìˆ™í•˜ê³  í¸ë¦¬í•œ Notionì— ì‘ì„±í•˜ê³ , CMSì— ì˜®ê¸´ í›„ ì´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì€ ë¶ˆí•„ìš”í•œ ê³¼ì •ì„ í¬í•¨í•˜ê³  ìˆë‹¤. ë”±íˆ Notionì— ì‘ì„±í•œ ì»¨í…ì¸ ì˜ ìˆ˜ì •ì´ ìˆëŠ” ê²ƒë„ ì•„ë‹ˆê³ , ë‹¨ìˆœíˆ CMSì— ë³µë¶™í•˜ì—¬ ë„£ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì´ë‹¤.

ë”°ë¼ì„œ, Notion APIë¥¼ í™œìš©í•´ Notionì„ ë°ì´í„°ë² ì´ìŠ¤ë¡œ í™œìš©í•˜ë©´ì„œ, Notionì— ì‘ì„±í•œ ê¸€ì„ ì‰½ê²Œ ê°€ì ¸ì™€ í•˜ë‚˜ì˜ ë¸”ë¡œê·¸ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ë³´ë‹¤ íš¨ìœ¨ì ì´ë¼ê³  íŒë‹¨í–ˆë‹¤.

## Notion API ì‚¬ìš©í•˜ê¸°

ë‹¤ìŒ ë§í¬ë¡œ ë“¤ì–´ê°€ë©´ Notion APIë¥¼ í™œìš©í•˜ê¸° ìœ„í•´ API Integrationì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

[Notion - The all-in-one workspace for your notes, tasks, wikis, and databases.](https://www.notion.so/my-integrations)

`ìƒˆ API í†µí•©`ì„ í†µí•´ ìƒˆë¡œìš´ API Integrationì˜ ê¸°ë³¸ ì •ë³´ë¥¼ ì…ë ¥í•˜ê³ , ê¸°íƒ€ ì„¤ì •ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. ì´í›„ ì œì¶œì„ ëˆŒëŸ¬ ì‹œí¬ë¦¿ í‚¤ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![Screenshot 2022-10-17 at 02.24.47.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/96c12b4b-100c-4946-b89e-c6011060669d/Screenshot_2022-10-17_at_02.24.47.png)

![Screenshot 2022-10-17 at 02.25.39.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/36f16436-7bdb-4ae4-a113-f2262ece7b4c/Screenshot_2022-10-17_at_02.25.39.png)

ì´í›„ ì›í•˜ëŠ” APIë¥¼ [ì—¬ê¸°](https://developers.notion.com/reference/intro)ì„œ í™•ì¸í•˜ì—¬ í™œìš©í•˜ë©´ ëœë‹¤.

[Start building with the Notion API](https://developers.notion.com/reference/intro)

## `Axios` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•œ Notion API êµ¬ì„±í•˜ê¸°

ì›í•˜ëŠ” `config`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê°„ë‹¨í•œ Axios ì¸ìŠ¤í„´ìŠ¤ì¸ `http`ë¥¼ ìƒì„±í•˜ê³ , ì´ë¥¼ í™œìš©í•´ ê°ê°ì˜ APIë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ ë°©ë²•ì€ ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© í”„ë¡ íŠ¸ì—”ë“œ ì½”ìŠ¤ì—ì„œ ê¸°ì—… ê³¼ì œë¥¼ ì§„í–‰í•  ë•Œ APIì˜ í™•ì¥ì„±ê³¼ ì¬ì‚¬ìš©ì„±ì„ ê³ ë ¤í•˜ëŠ” Best Practiceë¥¼ ê³ ë¯¼í•´ë³¸ ê²°ê³¼ë¬¼ì´ë‹¤.

```tsx
// services/index.ts

import axios from "axios";
import { BASE_URL, TOKEN_ID } from "config";

const http = axios.create({
  baseURL: BASE_URL,
  headers: {
    Authorization: `Bearer ${TOKEN_ID}`,
    "Notion-Version": "2022-06-28",
    "Content-Type": "application/json",
  },
});

export default http;
```

ì´ì œ Blog Notion Databaseì— ì¡´ì¬í•˜ëŠ” Postì˜ ëª©ë¡ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ UIë¡œ êµ¬í˜„í•˜ê¸° ìœ„í•´ `getNotionPostList`ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤. íŠ¹íˆ í™•ì¥ì„±ì„ ê³ ë ¤í•´ `get`, `post`, `delete` ë“± ë©”ì„œë“œë§Œ Axios ì¸ìŠ¤í„´ìŠ¤ì— ì¶”ê°€í•˜ì—¬ í™œìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆë‹¤.

```tsx
// services/notionApiServices.ts

import http from "services";
import { DATABASE_ID } from "config";

export const getNotionPostList = async () => {
  const response = await http.post(`${DATABASE_ID}/query`);

  return response;
};
```

### ì²« ë²ˆì§¸ íƒ€ì… ì—ëŸ¬ ë°œìƒ..!

`**ERROR!!**` ë‹¤ë§Œ ì´ë ‡ê²Œ êµ¬í˜„í•˜ëŠ” ê²½ìš°, `index.tsx`ì—ì„œ `getServerSideProps`ì—ì„œ `response.results`ë¥¼ ê°€ì ¸ì˜¬ ë•Œ íƒ€ì… ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.

```
'AxiosResponse<any, any>' í˜•ì‹ì— 'results' ì†ì„±ì´ ì—†ìŠµë‹ˆë‹¤.ts(2339)
```

```tsx
// pages/index.tsx

export const getServerSideProps = async () => {
  const response = await getNotionPostList();
  const data = response.results;

  return {
    props: { data: response },
  };
};
```

ì´ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ Axios ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ íƒ€ì…ì„ í™•ì¸í•˜ê¸° ìœ„í•´ `axios/index.d.ts` íŒŒì¼ì„ ì—´ì–´ë´¤ëŠ”ë°, `post` ë©”ì„œë“œ ì œë„¤ë¦­ì´ ê¸°ë³¸ê°’ìœ¼ë¡œ `any`ê°€ ì„¤ì •ë˜ì–´ ìˆê¸° ë•Œë¬¸ì¸ ê²ƒì²˜ëŸ¼ ë³´ì˜€ë‹¤. ë”°ë¼ì„œ, ë„˜ì–´ì˜¤ëŠ” ë°ì´í„°ì˜ íƒ€ì…ì„ ì„¤ì •í•´ì£¼ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë°ì´í„°ë¥¼ ë³´ê³  í•˜ë‚˜í•˜ë‚˜ íƒ€ì…ì„ ì§€ì •í•´ì£¼ê¸° ì‹œì‘í–ˆë‹¤.

```tsx
// axios/index.d.ts

export class Axios {
  // ...
  post<T = any, R = AxiosResponse<T>, D = any>(
    url: string,
    data?: D,
    config?: AxiosRequestConfig<D>,
  ): Promise<R>;
  // ...
}
```

```tsx
// services/notionApiServices.ts

import http from "services";
import { DATABASE_ID } from "config";

export const getNotionPostList = async () => {
  const response = await http.post(`${DATABASE_ID}/query`);

  return response;
};
```

ìš°ì„ , `getNotionPostList`ì—ì„œ `http`ëŠ” Axios ì¸ìŠ¤í„´ìŠ¤ë¡œ, íƒ€ì…ì´ `AxoisInstance`ì´ê³ , `post` ë©”ì„œë“œì˜ íƒ€ì…ì€ ë‹¤ìŒê³¼ ê°™ë‹¤. ì´ë•Œ `AxiosResponse`ì™€ `AxiosRequestConfig`ì—ì„œ ì œë„¤ë¦­ `T`, `D`ê°€ í™œìš©ë˜ê¸° ë•Œë¬¸ì— ì´ ë˜í•œ í™•ì¸í•´ë³´ì•˜ë‹¤.

```tsx
// post ë©”ì„œë“œì˜ íƒ€ì…

Axios.post<T = any, R = AxiosResponse<T, any>, D = any>(url: string, data?: D, config?: AxiosRequestConfig<D>): Promise<R>
```

```tsx
export interface AxiosResponse<T = any, D = any> {
  data: T;
  status: number;
  statusText: string;
  headers: RawAxiosResponseHeaders | AxiosResponseHeaders;
  config: AxiosRequestConfig<D>;
  request?: any;
}
```

```tsx
export interface AxiosRequestConfig<D = any> {
  url?: string;
  method?: Method | string;
  baseURL?: string;
  transformRequest?: AxiosRequestTransformer | AxiosRequestTransformer[];
  transformResponse?: AxiosResponseTransformer | AxiosResponseTransformer[];
  headers?: RawAxiosRequestHeaders;
  params?: any;
  paramsSerializer?: ParamsSerializerOptions;
  data?: D;
  timeout?: Milliseconds;
  timeoutErrorMessage?: string;
  withCredentials?: boolean;
  adapter?: AxiosAdapter;
  auth?: AxiosBasicCredentials;
  responseType?: ResponseType;
  responseEncoding?: responseEncoding | string;
  xsrfCookieName?: string;
  xsrfHeaderName?: string;
  onUploadProgress?: (progressEvent: AxiosProgressEvent) => void;
  onDownloadProgress?: (progressEvent: AxiosProgressEvent) => void;
  maxContentLength?: number;
  validateStatus?: ((status: number) => boolean) | null;
  maxBodyLength?: number;
  maxRedirects?: number;
  maxRate?: number | [MaxUploadRate, MaxDownloadRate];
  beforeRedirect?: (
    options: Record<string, any>,
    responseDetails: { headers: Record<string, string> },
  ) => void;
  socketPath?: string | null;
  httpAgent?: any;
  httpsAgent?: any;
  proxy?: AxiosProxyConfig | false;
  cancelToken?: CancelToken;
  decompress?: boolean;
  transitional?: TransitionalOptions;
  signal?: GenericAbortSignal;
  insecureHTTPParser?: boolean;
  env?: {
    FormData?: new (...args: any[]) => object;
  };
  formSerializer?: FormSerializerOptions;
}
```

ê²°êµ­, ëª¨ë‘ `data`ì˜ íƒ€ì…ì„ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤. ë”°ë¼ì„œ ì½˜ì†”ì— ì°íˆëŠ” ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ `data`ì˜ íƒ€ì…ì„ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•´ ë„£ì–´ì£¼ì—ˆë‹¤.

```tsx
export interface NotionPostDataType {
  object: string;
  results: NotionPostType[];
  has_more: boolean;
  type: string;
}
```

```tsx
const response = await http.post<
  NotionPostDataType,
  AxiosResponse<NotionPostDataType, NotionPostDataType>,
  NotionPostDataType
>(`${DATABASE_ID}/query`);
```

ë‹¤ë§Œ, ì—¬ì „íˆ Propsë¡œ ë„˜ì–´ì˜¤ëŠ” ê°’ì´ `any`ê°€ ë˜ê³  ìˆì—ˆë‹¤.

```tsx
(parameter) data: any
```

[Next.js ê³µì‹ í™ˆí˜ì´ì§€](https://nextjs.org/docs/api-reference/data-fetching/get-server-side-props#getserversideprops-with-typescript)ì˜ `getServerSideProps`ì˜ Typeì„ ìœ ì¶”í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” `inferGetServerSidePropsType`ì„ í™œìš©í•´ë„ ë™ì¼í•˜ê²Œ anyê°€ ë°œìƒí–ˆë‹¤.

```tsx
const Home: NextPage = ({
  data,
}: InferGetServerSidePropsType<typeof getServerSideProps>) => {
  return <div>MAIN</div>;
};
```

ë‹¤ìŒ ì§„í–‰ì„ í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— `any`ë¡œ ë‘” ì±„ ë„˜ì–´ê°€ê³ , ì´í›„ì— ì¡°ê¸ˆ ë” ì°¾ì•„ë´ì•¼ê² ë‹¤. ğŸ˜­

ë‹¤ì‹œ í•œ ë²ˆ Axios ì¸í„°ì…‰í„°ë¥¼ í™œìš©í•´ `config`ì™€ `response`ë¥¼ ëª¨ë‘ ì¶œë ¥í•´ í™•ì¸í•´ë³´ê³ ì í–ˆë‹¤.

```tsx
http.interceptors.request.use(
  (config) => {
    console.info("===configë¥¼ í™•ì¸í•´ë³´ì ===");
    console.log(config);
    return config;
  },
  (error) => {
    return Promise.reject(error);
  },
);

http.interceptors.response.use(
  (response) => {
    console.info("===responseë¥¼ í™•ì¸í•´ë³´ì===");
    console.log(response);
    return response.data;
  },
  (error) => {
    return Promise.reject(error);
  },
);
```

ì´ë²ˆì— ë‹¤ì‹œ í™•ì¸í•´ì•¼í•  ê²ƒì€ ì•„ë˜ `post` ë©”ì„œë“œì—ì„œ `T`, `R`, `D`ì— ë“¤ì–´ê°ˆ íƒ€ì…ì„ í™•ì¸í•˜ê¸° ìœ„í•´ í•´ë‹¹ ë¶€ë¶„ì˜ ë°ì´í„° í˜•íƒœë¥¼ í™•ì¸í•´ì•¼ í•œë‹¤.

```tsx
Axios.post<T = any, R = AxiosResponse<T, any>, D = any>(url: string, data?: D, config?: AxiosRequestConfig<D>): Promise<R>
```

ìš°ì„  `T`ëŠ” `AxiosResponse`ì˜ `data` ì†ì„±ì˜ ê°’ì˜ Typeìœ¼ë¡œ ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì— í•´ë‹¹ `data` ì†ì„±ì„ í™•ì¸í•´ë´ì•¼ í•œë‹¤.

```tsx
export interface AxiosResponse<T = any, D = any> {
  data: T;
  status: number;
  statusText: string;
  headers: RawAxiosResponseHeaders | AxiosResponseHeaders;
  config: AxiosRequestConfig<D>;
  request?: any;
}
```

```
===responseë¥¼ í™•ì¸í•´ë³´ì===

{
  status: 200,
  statusText: 'OK',
  headers: AxiosHeaders { ... },
  config: { ... },
  request: <ref *1> ClientRequest { ... },

  data: {
    object: 'list',
    results: [ [Object], [Object], [Object], [Object] ],
    next_cursor: null,
    has_more: false,
    type: 'page',
    page: {}
  }
}
```

ê²°êµ­, `T`ëŠ” `NotionPostDataType`ì˜ í˜•íƒœë¥¼ ë„ê³  ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤. `results` ì†ì„± ê°’ì¸ ë°°ì—´ì„ ë‹¤ì‹œ í™•ì¸í•´ë³´ë‹ˆ, ê²°êµ­ `NotionPostType`ì˜ í˜•íƒœë¥¼ ê°€ì§€ê³  ìˆë‹¤.

```
results: [
    {
      object: 'page',
      id: '...',
      created_time: '2022-10-16T14:02:00.000Z',
      last_edited_time: '2022-10-16T14:29:00.000Z',
      created_by: [Object],
      last_edited_by: [Object],
      cover: null,
      icon: [Object],
      parent: [Object],
      archived: false,
      properties: [Object],
      url: '....'
    },
		.......
]
```

ê°€ì¥ ì¤‘ìš”í•œ ë°ì´í„°ê°€ ìˆëŠ” `properties`ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ë³´ì.

```
{
  summary: { id: 'ALA%3E', type: 'rich_text', rich_text: [ [Object] ] },
  status: {
    id: 'Gv%7C%40',
    type: 'status',
    status: {
      id: 'd4bc155d-6949-46b9-9929-1b983803f49c',
      name: 'Writing Contents',
      color: 'blue'
    }
  },
  date: {
    id: 'a~vg',
    type: 'date',
    date: { start: '2022-10-16', end: null, time_zone: null }
  },
  category: {
    id: 'd%3F%40%3B',
    type: 'multi_select',
    multi_select: [ [Object], [Object] ]
  },
  slug: { id: 'q%7CXS', type: 'rich_text', rich_text: [ [Object] ] },
  title: { id: 'title', type: 'title', title: [ [Object] ] }
}
```

ê²°êµ­, Notionì— ì €ì¥ëœ ê¸€ì˜ ë°ì´í„°ì„ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.

ê·¸ë ‡ë‹¤ë©´ `D`ëŠ” ë¬´ì—‡ì¸ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ `config` ë°ì´í„°ë¥¼ ì¶œë ¥í–ˆë‹¤. ê·¸ ì´ìœ ëŠ” ì œë„¤ë¦­ `D`ê°€ `AxiosRequestConfig`ì˜ `data`ì˜ íƒ€ì…ì„ ì§€ì¹­í•˜ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤.

```tsx
export interface AxiosRequestConfig<D = any> {
  // ...
  data?: D;
  // ...
}
```

```
=== configë¥¼ í™•ì¸í•´ë³´ì ===
{
	// ...
  data: { filter: { property: 'status', status: [Object] } }
}
```

ì¦‰, API í˜¸ì¶œì„ í•  ë•Œ ì‘ì„±í•œ í•„í„°ì— ê´€ë ¨ëœ ì¶”ê°€ì ì¸ ì •ë³´ê°€ `data`ì´ë¯€ë¡œ, ì´ë¥¼ `Filter` íƒ€ì…ìœ¼ë¡œ ì„ ì–¸í•´ì£¼ì—ˆë‹¤.

ê²°êµ­ ìµœì¢…ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ êµ¬ì„±í–ˆë”ë‹ˆ ì œëŒ€ë¡œ ìë™ì™„ì„±ë„ ë˜ê³ , `any`ì—ì„œ íƒˆì¶œí•  ìˆ˜ ìˆì—ˆë‹¤..!

```tsx
// services/notionApiServices.ts

import http from "services";
import { AxiosResponse } from "axios";
import { DATABASE_ID } from "config";
import { NotionPostDataType } from "types";

type Filter = {
  filter: {
    property: string;
    status: {
      equals: string;
    };
  };
};

export const getNotionPostList = async (filter: Filter) => {
  const response = await http.post<
    NotionPostDataType,
    AxiosResponse<NotionPostDataType>,
    Filter
  >(`${DATABASE_ID}/query`, filter);

  return response;
};
```

```tsx
// pages/index.tsx

import type { NextPage } from "next";
import { getNotionPostList } from "services/notionApiServices";
import { NotionPostDataType } from "types";

type HomeProps = {
  data: NotionPostDataType;
};

const Home: NextPage = ({ data }: HomeProps) => {
  console.log(data);

  return (
    <>
      {data.results.map(({ properties }) => (
        <div>
          <h2>{properties.title.title[0].plain_text}</h2>
        </div>
      ))}
    </>
  );
};

export default Home;

export const getServerSideProps: GetServerSideProps = async () => {
  const response = await getNotionPostList({
    filter: {
      property: "status",
      status: {
        equals: "Upload",
      },
    },
  });

  const data = response.data;

  return {
    props: { data },
  };
};
```

### ë‘ ë²ˆì§¸ íƒ€ì… ì—ëŸ¬ ë°œìƒ.. ğŸ˜­

ìë™ì™„ì„±ë„ ë˜ê³ , íƒ€ì… ì¶”ë¡ ë„ ì œëŒ€ë¡œ ë˜ê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ì—†ë„¤? í•˜ê³  ë„˜ì–´ê°€ë ¤ê³  í–ˆëŠ”ë°, `Home`ì—ì„œ ë‹¤ì‹œ íƒ€ì… ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.

```tsx
'({ data }: HomeProps) => JSX.Element' í˜•ì‹ì€ 'NextPage<{}, {}>' í˜•ì‹ì— í• ë‹¹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
  '({ data }: HomeProps) => JSX.Element' í˜•ì‹ì€ 'FunctionComponent<{}> & { getInitialProps?(context: NextPageContext): {} | Promise<{}>; }' í˜•ì‹ì— í• ë‹¹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
    '({ data }: HomeProps) => JSX.Element' í˜•ì‹ì€ 'FunctionComponent<{}>' í˜•ì‹ì— í• ë‹¹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
      '__0' ë° 'props' ë§¤ê°œ ë³€ìˆ˜ì˜ í˜•ì‹ì´ í˜¸í™˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
        'data' ì†ì„±ì´ '{}' í˜•ì‹ì— ì—†ì§€ë§Œ 'HomeProps' í˜•ì‹ì—ì„œ í•„ìˆ˜ì…ë‹ˆë‹¤.ts(2322)
index.tsx(6, 3): ì—¬ê¸°ì„œëŠ” 'data'ì´(ê°€) ì„ ì–¸ë©ë‹ˆë‹¤.
```

ë§ˆì§€ë§‰ì—ì„œ ë‘ ë²ˆì§¸ ì—ëŸ¬ ë©”ì‹œì§€ì— ì£¼ëª©í–ˆë‹¤.

```tsx
'data' ì†ì„±ì´ '{}' í˜•ì‹ì— ì—†ì§€ë§Œ 'HomeProps' í˜•ì‹ì—ì„œ í•„ìˆ˜ì…ë‹ˆë‹¤.ts(2322)
```

ì¦‰, `NextPage`ì˜ íƒ€ì…ì—ëŠ” `data` ì†ì„±ì´ ì—†ì§€ë§Œ, `HomeProps`ì—ì„œëŠ” í•„ìˆ˜ì ì´ê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” ë¬¸ì œë¡œ íŒŒì•…í–ˆë‹¤. ë”°ë¼ì„œ `data` ì†ì„±ì„ ì˜µì…”ë„í•˜ê²Œ ë³€ê²½í•´ì£¼ì—ˆë‹¤.

```tsx
type HomeProps = {
  data?: NotionPostDataType;
};

const Home: NextPage = ({ data }: HomeProps) => {
  console.log(data);

  return (
    <>
      {data?.results.map(({ properties }) => (
        <div>
          <h2>{properties.title.title[0].plain_text}</h2>
        </div>
      ))}
    </>
  );
};
```

ë‹¤ë§Œ, ì´ëŸ¬í•œ ë°©ì‹ì´ ìµœì„ ì¸ì§€ëŠ” ëª¨ë¥´ê² ë‹¤. ê²°êµ­ ë‹¤ì‹œ `NextPage`ë¥¼ í•œ ë²ˆ ì—´ì–´ë´¤ë‹¤.

```tsx
// next/types/index.d.ts

/**
 * `Page` type, use it as a guide to create `pages`.
 */
export type NextPage<P = {}, IP = P> = NextComponentType<
  NextPageContext,
  IP,
  P
>;
```

ì œë„¤ë¦­ìœ¼ë¡œ ì„¤ì •ëœ `P`ì˜ ê°’ì˜ ê¸°ë³¸ê°’ì´ `{}` ì„ì„ í™•ì¸í•˜ê³ , `P`ëŠ” ì–´ë””ì—ì„œ í™œìš©ë˜ëŠ” ì§€ ë³´ê¸° ìœ„í•´ `NextComponentType`ì„ í™•ì¸í–ˆë‹¤.

```tsx
// next/dist/shared/lib/utils.d.ts

export declare type NextComponentType<
  C extends BaseContext = NextPageContext,
  IP = {},
  P = {},
> = ComponentType<P> & {
  /**
   * Used for initial page load data population. Data returned from `getInitialProps` is serialized when server rendered.
   * Make sure to return plain `Object` without using `Date`, `Map`, `Set`.
   * @param ctx Context of `page`
   */
  getInitialProps?(context: C): IP | Promise<IP>;
};
```

ì¦‰, `ComponentType`ì—ì„œ í™œìš©ë˜ëŠ” ê²ƒì„ ë³´ê³ , ë‹¤ì‹œ `ComponetType`ì„ `F12`ë¡œ ì—´ì–´ë³´ë‹ˆ Reactì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì˜ë¯¸í•˜ëŠ” ë“¯í•œ íƒ€ì…ì´ ë³´ì˜€ë‹¤. íŠ¹íˆ namespaceë¥¼ ì— ë–¡í•˜ë‹ˆ Reactë¼ê³  ì‘ì„±ë˜ì–´ ìˆê¸°ì— í™•ì¸í•˜ê¸° ì–´ë µì§€ ì•Šì•˜ë‹¤.

```tsx
// @types/react/index.d.ts

declare namespace React {
  //
  // React Elements
  // ----------------------------------------------------------------------

  // ...

  type ComponentType<P = {}> = ComponentClass<P> | FunctionComponent<P>;

  // ...
}
```

ê·¼ë° í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ëŠ” ê±°ì˜ í™œìš©í•˜ì§€ ì•Šìœ¼ë©° í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ë¥¼ ì£¼ë¡œ ì‚¬ìš©í•˜ë©° ì§€ê¸ˆë„ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— `FunctionComponent`ë¥¼ í™•ì¸í–ˆë‹¤. ì´ê±¸ í™•ì¸í•˜ë©´ì„œ ë¬´ì‹¬ì½” ì‚¬ìš©í–ˆë˜ React.FCê°€ FunctionComponentë¥¼ ì§€ì¹­í•˜ê³  ìˆìŒì„ ë‘ ëˆˆìœ¼ë¡œ í™•ì¸í–ˆë‹¤.

```tsx
// @types/react/index.d.ts

type FC<P = {}> = FunctionComponent<P>;

interface FunctionComponent<P = {}> {
  (props: P, context?: any): ReactElement<any, any> | null;
  propTypes?: WeakValidationMap<P> | undefined;
  contextTypes?: ValidationMap<any> | undefined;
  defaultProps?: Partial<P> | undefined;
  displayName?: string | undefined;
}
```

ì¦‰, Propsë¥¼ ì˜ë¯¸í•˜ëŠ” ì œë„¤ë¦­ì´ `P`ì˜€ë‹¤.(Pë¡œ ì§€ì¹­í•œ ê±°ì—ì„œ ëˆˆì¹˜ ì±Œ ë§Œ í–ˆëŠ”ë° ëˆˆì¹˜ê°€ ì—†ì—ˆë‚˜ë³´ë‹¤) PropsëŠ” ì—†ì„ ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì— ê¸°ë³¸ ê°’ìœ¼ë¡œ ë¹ˆ ê°ì²´ê°€ ì„¤ì •ë˜ì–´ ìˆê³ , ë”°ë¼ì„œ `NextPage`ì˜ ì œë„¤ë¦­ `P`ë¥¼ ì„¤ì •í•´ì£¼ë©´ í•´ê²°ë˜ëŠ” ë¬¸ì œì˜€ë‹¤!

```tsx
type HomeProps = {
  data: NotionPostDataType;
};

const Home: NextPage<HomeProps> = ({ data }) => {
  console.log(data);

  return (
    <>
      {data.results.map(({ properties }) => (
        <div>
          <h2>{properties.title.title[0].plain_text}</h2>
        </div>
      ))}
    </>
  );
};
```

ê²°êµ­ ë‘ ê°€ì§€ íƒ€ì… ì—ëŸ¬ë¥¼ ëª¨ë‘ í•´ê²°í–ˆë‹¤..!

## Notion ë°ì´í„° ë Œë”ë§í•˜ê¸°

ìƒì„¸ í˜ì´ì§€ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” Notionìœ¼ë¡œ ë°›ì•„ì˜¤ëŠ” ë°ì´í„°ë¥¼ ë Œë”ë§í•´ì•¼ í•œë‹¤. ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ë²•ìœ¼ë¡œëŠ”, `slug`ì— ë”°ë¼ `pageId`ë¥¼ ì°¾ì€ ë’¤ì— í•´ë‹¹ `pageId`ì— ë§ëŠ” Notion APIë¥¼ í™œìš©í•´ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ë Œë”ë§í•˜ëŠ” ë°©ì‹ì´ë‹¤. í•˜ì§€ë§Œ ì´ëŸ¬í•œ ë°©ì‹ì„ ì ìš©í•˜ë©´, ê°ê°ì˜ JSXì— ëŒ€í•´ Tailwind CSSë¡œ ëª¨ë‘ ìŠ¤íƒ€ì¼ë§ì„ í•´ì£¼ì–´ì•¼ í•˜ê³ , ì½”ë“œ ë°•ìŠ¤, ì¸ìš©, í† ê¸€ ë“±ì„ ì§ì ‘ êµ¬í˜„í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë¹„íš¨ìœ¨ì ì´ë¼ê³  íŒë‹¨í–ˆë‹¤. ë‚˜ì¤‘ì— ì‹œê°„ì´ ë˜ë©´ ì§ì ‘ êµ¬í˜„í•˜ì—¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì²˜ëŸ¼ ë§Œë“¤ì–´ë„ ì¢‹ì„ ë“¯ í•˜ë‹¤.

ê²°êµ­ ì—¬ëŸ¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì°¾ì•„ë³¸ ê²°ê³¼ `[react-notion-x](https://github.com/NotionX/react-notion-x)`ë¥¼ ê°€ì¥ ì‰½ê²Œ í™œìš©í•  ìˆ˜ ìˆë‹¤ê³  íŒë‹¨ì´ ë˜ì–´ í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ê²°ì •í–ˆë‹¤.

https://github.com/NotionX/react-notion-x

ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•˜ë©´, `pageId`ë¡œ í•´ë‹¹ í˜ì´ì§€ë¥¼ ì†ì‰½ê²Œ ë Œë”ë§í•  ìˆ˜ ìˆë‹¤.

```tsx
import { NotionAPI } from 'notion-client'

const notion = new NotionAPI()

const recordMap = await notion.getPage(pageId: string);
```

ìš°ì„  `getStaticPaths`ë¡œ ëª¨ë“  ê²½ë¡œë¥¼ ë§Œë“¤ì—ˆë‹¤.

```tsx
// pages/blog/[slug].tsx

export const getStaticPaths: GetStaticPaths = async () => {
  const slugs = await getNotionPostSlugs({
    filter: {
      property: "status",
      status: {
        equals: "Upload",
      },
    },
  });

  return {
    paths: slugs,
    fallback: false,
  };
};
```

ì´í›„, slugë¥¼ ë°”íƒ•ìœ¼ë¡œ pageIdë¥¼ ê°€ì ¸ì˜¤ëŠ” API í•¨ìˆ˜ë¥¼ ìƒì„±í•˜ê³ , ì´ë¥¼ í†µí•´ Notion Page ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” API í•¨ìˆ˜ë¥¼ ìƒì„±í•´ ë°ì´í„°ë¥¼ ë°›ì•„ì™”ë‹¤.

```tsx
// services/notionApiService.ts

export const getNotionPostPageId = async (filter: slugFilter) => {
  const response = await http.post<
    NotionPostDataType,
    AxiosResponse<NotionPostDataType>,
    slugFilter
  >(`databases/${DATABASE_ID}/query`, filter);

  return response.data.results[0].id;
};

export const getBlockMapByPageId = async (id: string) => {
  const notion = new NotionAPI();

  id = id.split("-").join("");

  const recordMap = await notion.getPage(id);

  return recordMap;
};
```

ì´ë ‡ê²Œ ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ `NotionRenderer` ì»´í¬ë„ŒíŠ¸ì— ë„˜ê²¨ì£¼ë©´ ë Œë”ë§ì´ ëœë‹¤. ë‹¤ë§Œ ì½”ë“œ ë°•ìŠ¤, ì½œë ‰ì…˜, ìˆ˜ì‹ ë“±ì˜ ê¸°ëŠ¥ì€ ì¶”ê°€ì ì¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì ¸ì™€ì•¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```tsx
// components/post/PostDetail.tsx

const PostDetail = ({ data }: PostDetailProps) => {
  return (
    <NotionRenderer
      recordMap={data}
      fullPage={true}
      darkMode={false}
      components={{
        Code,
        Collection,
        Equation,
      }}
    />
  );
};

export default PostDetail;
```

ê²°êµ­ ì´ë ‡ê²Œ ë Œë”ë§ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![https://minilog-dev.vercel.app/blog/minilog-notion-api-retrospective](/images/Use-Notion-as-CMS/Notion-API.png)

## ë§ˆë¬´ë¦¬

ë¬¼ë¡  ì•„ì§ ìŠ¤íƒ€ì¼ë§ê³¼ ì„¸ì„¸í•œ ì´ìŠˆë“¤ì´ ì¡´ì¬í•˜ì§€ë§Œ, ë¸”ë¡œê·¸ë¥¼ í™”ë¶„ì²˜ëŸ¼ ê°€ê¿”ë‚˜ê°€ë©° ì§€ì‹ìš•ì„ í•´ì†Œí•˜ê³ , ë‹¤ë¥¸ ê°œë°œìë“¤ì—ê²Œ í•œ ì¤Œì˜ ë„ì›€ì´ë¼ë„ ë  ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ë‹¤. ë‚´ê°€ í•˜ê³ ì‹¶ì—ˆë˜ ê²ƒì„ ë§Œë“œëŠ” ê²ƒì´ ì–¼ë§ˆë‚˜ ì¦ê±°ìš´ ì¼ì¸ì§€ë„ ê¹¨ë‹¬ì•˜ë‹¤. ì²˜ìŒì— íƒ€ì… ì—ëŸ¬ê°€ ì§€ì†ë  ë•Œ ì •ë§ ë¬¸ì œê°€ ë­”ì§€ ì´í•´ê°€ ë˜ì§€ ì•Šê³  ê·¸ë¬ëŠ”ë°, ëª©í‘œì˜€ë˜ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ê³ êµ°ë¶„íˆ¬í•˜ë‹¤ë³´ë‹ˆ í•´ê²°ë˜ì–´ ì •ë§ ë§Œì¡±ìŠ¤ëŸ½ë‹¤. ì´ì œëŠ” ë¸”ë¡œê·¸ì— ì¶”ê°€í•  ê¸°ëŠ¥ë“¤ê³¼ ìŠ¤íƒ€ì¼ë§ì— ëŒ€í•œ ê³ ë¯¼ì€ ì§€ì†ì ìœ¼ë¡œ í•´ë´ì•¼ê² ë‹¤â€¦!

ì´ë²ˆ í”„ë¡œì íŠ¸ëŠ” ì˜ì›íˆ ì§„í–‰í•  ê²ƒì´ë¯€ë¡œ ëì´ë¼ëŠ” ì¸ì‚¬ëŠ” ìƒëµí•˜ë„ë¡ í•˜ê² ë‹¤!
